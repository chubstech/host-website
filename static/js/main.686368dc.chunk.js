(this["webpackJsonpchart-demo"]=this["webpackJsonpchart-demo"]||[]).push([[0],{183:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(34),l=a.n(o),c=(a(82),a(9)),i=a(10),s=a(12),u=a(11),m=a(13),h=(a(53),a(83),a(74)),d=a(26),p=a(27),b=a(21),f=a(19),v=a(14),E=a.n(v);var g=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){fetch("https://cors-anywhere.herokuapp.com/https://noise-wearable.herokuapp.com/api/users").then((function(e){return e.json()})).then((function(e){return e})).then((function(e){var t=JSON.stringify(e);t=JSON.parse(t),console.log(t);t.map((function(e){console.log(e.user_id);(function(e){var t="https://cors-anywhere.herokuapp.com/https://noise-wearable.herokuapp.com/api/noise_observation/user/";return t+=e,fetch(t).then((function(e){return e.json()})).then((function(e){return e}))})(e.user_id).then((function(t){var a=JSON.stringify(t);a=JSON.parse(a);var n=Math.floor((new Date).getTime()/1e3),r=Math.round(n-7200),o=a.filter((function(e){if(e.time_obs>=r&&e.time_obs<n)return e.time_obs}));console.log(o);var l=new Object;o.map((function(e){var t,a,n,r=function(e){var t=e.getHours(),a=e.getMinutes(),n=t>=12?"pm":"am";return(t=(t%=12)||12)+":"+(a=a<10?"0"+a:a)+" "+n}(new Date(1e3*e.time_obs));t=r,a=e.db_reading,t in(n=l)?n[t]<a&&(n[t]=a):n[t]=a}));var c=document.createElement("canvas"),i="chart"+e.user_id;c.id=i;var s=document.createElement("H2"),u=document.createTextNode(e.user_id);s.appendChild(u),document.querySelector("#chartContainer").appendChild(s),document.querySelector("#chartContainer").appendChild(c);var m=document.getElementById(i).getContext("2d");window[i]=new E.a(m,{type:"line",data:{labels:Object.keys(l).reverse(),datasets:[{label:"DB Levels",data:Object.values(l).reverse()}]},options:{title:{display:!0,text:e.user_id},scales:{xAxes:[{ticks:{maxTicksLimit:20}}],yAxes:[{ticks:{beginAtZero:!0}}]}}})}))}))}))}},{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(r.a.Component);r.a.Component;var k=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Noise Manager WebApp"),r.a.createElement("p",null,"Real time data of each section/device"),r.a.createElement("div",{id:"chartContainer"},r.a.createElement(g,null)))};r.a.Component;var y=a(71),M=0;function w(e,t){var a=["rgb(25, 129, 102)","rgba(171,185,255)","rgb(19, 72, 250)","rgb(174, 255, 171)","rgb(255, 205, 139)","rgb(252, 58, 113)","rgb(232, 222, 46)","rgb(178, 62, 207)","rgb(158, 56, 5)"],n=function(e){for(var t=0,a={},n=0,r=0,o=[],l=0,c=0,i=0,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0;u<e.length;u++){var m=new Date(1e3*e[u].time_obs);0==l?l=m.getHours():m.getHours()!=l?(o.push([Math.round(c/i),l]),l=m.getHours(),c=0,i=0):u==e.length-1&&o.push([Math.round(c/i),l]),c+=e[u].db_reading,e[u].db_reading>=t&&(delete a[t],t=e[u].db_reading,a[e[u].db_reading]?a[e[u].db_reading].push(m.toLocaleString()):a[e[u].db_reading]=[m.toLocaleString()]),i++}for(var h=0;h<o.length;h++){s[o[h][1]]=o[h][0],0!==o[h][0]&&(n+=o[h][0],r++)}return[s,Math.round(n/r),t,a[t]]}(e),r={label:t,fill:!1,backgroundColor:a[M],borderColor:a[M],data:n[0],avg:n[1],peak:n[2],peaktimes:n[3]};return M++,r}var O={showScale:!0,pointDot:!0,title:{display:!0,text:"Average Noise Levels in the Past 24 Hours (Hourly)",fontSize:20},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Noise (dB) Levels"}}]}};var j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).changeText=function(){"Weekly Report"==a.state.text?a.setState({text:"Daily Report"}):a.setState({text:"Weekly Report"})},a.chartReference=r.a.createRef(),a.label=["12AM","1AM","2AM","3AM","4AM","5AM","6AM","7AM","8AM","9AM","10AM","11AM","12PM","1PM","2PM","3PM","4PM","5PM","6PM","7PM","8PM","9PM","10PM","11PM"],a.state={text:"Weekly Report",chartData:{labels:a.label,datasets:[]},json_files:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=[];fetch("https://cors-anywhere.herokuapp.com/https://noise-wearable.herokuapp.com/api/users").then((function(e){return e.json()})).then((function(e){return e})).then((function(a){var n=JSON.stringify(a);(n=JSON.parse(n)).forEach((function(a,r){var o;(o=a.user_id,fetch("https://cors-anywhere.herokuapp.com/https://noise-wearable.herokuapp.com/api/noise_observation/user/"+o).then((function(e){return e.json()})).then((function(e){return e}))).then((function(a){var r=JSON.stringify(a),o=w(r=JSON.parse(r),r[0].user_id);if(console.log(o),t.push(o),t.length==n.length)return e.setState({chartData:{datasets:t}}),t}))}))}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"lineChart"},r.a.createElement(y.a,{ref:this.chartReference,data:this.state.chartData,options:O,height:250,width:600})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("h3",null,"Daily Summary Table"),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{id:"table-header"},"Section Name"),r.a.createElement("th",{id:"table-header"},"Average dB"),r.a.createElement("th",{id:"table-header"},"Peak dB"),r.a.createElement("th",{id:"table-header"},"Peak dB Time")),this.state.chartData.datasets.map((function(e){return r.a.createElement("tr",{key:e.label},r.a.createElement("td",null,e.label),r.a.createElement("td",null,e.avg),r.a.createElement("td",null," ",e.peak),r.a.createElement("td",null,e.peaktimes))}))))))}}]),t}(r.a.Component),S=a(48),_=function(){var e=new Date;return r.a.createElement("div",null,r.a.createElement("div",{className:"no-print print-btn"},r.a.createElement(S.a,{variant:"info",size:"lg",onClick:function(e){e.preventDefault(),window.print()}},"Print report")),r.a.createElement("h1",null,"Your Noise Report Summary"),r.a.createElement("p",null,"Generated on ",r.a.createElement("b",null,e.toLocaleDateString())),r.a.createElement(j,null),r.a.createElement("br",null),r.a.createElement("br",null))},A=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Help"),r.a.createElement("p",null,"Please contact UCI's team Chubby Cats."),r.a.createElement("p",null,"ziv@uci.edu"))},C=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(b.a,{basename:"/"},r.a.createElement(d.a,{bg:"dark",variant:"dark",expand:"sm"},r.a.createElement(d.a.Brand,{as:b.b,to:"/"},"React Demo App"),r.a.createElement(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(d.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(p.a,{className:"mr-auto"},r.a.createElement(p.a.Link,{as:b.c,to:"/host-website"},"Home"),r.a.createElement(p.a.Link,{as:b.c,to:"/report"},"Report"),r.a.createElement(p.a.Link,{as:b.c,to:"/help"},"Help")))),r.a.createElement("br",null),r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/host-website",component:k}),r.a.createElement(f.b,{exact:!0,path:"/report",component:_}),r.a.createElement(f.b,{exact:!0,path:"/help",component:A}),r.a.createElement(f.a,{from:"/",to:"/host-website"}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(b.a,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},53:function(e,t,a){},77:function(e,t,a){e.exports=a(183)},82:function(e,t,a){}},[[77,1,2]]]);
//# sourceMappingURL=main.686368dc.chunk.js.map